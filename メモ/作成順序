フェーズ 1: 土台とデータ層の構築 (Foundation)
UIを作る前に、データが保存・取得できる環境を整えます。これがしっかりしていないと、UI実装時に型エラーやデータ不整合で悩みます。

【完了】1. 型定義 (src/index.ts)

最初に提示された Category, Coin, Household, HouseholdItem のインターフェースを作成します。

これが全ての設計図になります。

2. データベース初期化 (src/database/db.ts)

expo-sqlite をインストールし、アプリ起動時にテーブルを作成（CREATE TABLE IF NOT EXISTS）する処理を書きます。

3. 基本Serviceの実装 (src/services/transactionService.ts)

まだ複雑なクエリは不要です。まずは「単純な保存（INSERT）」と「全件取得（SELECT）」の関数だけ作ります。

とりあえずデータが入る・出ることを確認するためです。

ゴール: アプリを起動してもエラーが出ず、裏側でSQLiteのテーブルが作成されている状態。

フェーズ 2: UIスケルトンと単純な入力 (Basic Input)
「3秒ルール」などの複雑なロジックは後回しにして、まずは「ボタンを押したらDBに保存される」ことだけを目指します。

4. UIパーツ作成 (Components)

CoinList.tsx: コインの画像を表示し、タップイベントを受け取れるようにする。

RadialMenu.tsx: カテゴリを表示し、選択状態を管理できるようにする。

5. 画面1の仮組み (screens/InputScreen)

上記2つのコンポーネントを画面に配置します。

6. 単純な保存機能の接続

まだフックは作り込みません。コインをタップしたら transactionService を直接呼び出し、「毎回新しい親家計簿(Household)を作る」という単純な実装でDB保存を確認します。

ゴール: カテゴリを選んでコインを押すと、エラーなく保存処理が走る（コンソールログ等で確認）。

フェーズ 3: コアロジックの実装 (Core Logic)
ここでこのアプリの肝である「3秒ルール」を実装します。

7. カスタムフック作成 (hooks/useCoinInput.ts)

useRef や useState を使い、前回のタップ時間とIDを保持するロジックを書きます。

「3秒以内の連続タップなら同じ親IDを使う」「3秒経過なら新規作成」という分岐を実装します。

8. 画面1への適用

フェーズ2で書いた単純な保存処理を、このフック経由の処理に置き換えます。

ゴール: コインを連打した時と、ゆっくり押した時で、DBへの保存され方（親IDが同じか別か）が変わることを確認。

フェーズ 4: データ表示とグラフ (Data Visualization)
入力したデータが正しいかを確認するための「画面2」を作ります。

9. データ取得Serviceの拡充 (src/services/transactionService.ts)

月ごとの集計（SUM）や、親子テーブルを結合（JOIN）して取得するクエリを追加します。

10. 画面2のリスト表示 (components/TransactionList.tsx)

まずはグラフなしで、保存されたデータがズラッと並ぶリストを作ります。ここで削除や編集機能も実装するとデバッグが楽になります。

11. 画面2のグラフ表示 (components/MonthlyChart.tsx)

集計データをグラフライブラリ（react-native-gifted-charts や victory-native など）に渡して描画します。

ゴール: 入力した金額がリストに反映され、グラフが正しく描画される。削除ができる。

フェーズ 5: 仕上げとナビゲーション (Polish & Navigation)
最後にアプリとしての体裁を整えます。

12. ナビゲーション設定

react-navigation を使い、ドロワーメニュー（ハンバーガー）とスタックナビゲーションを設定します。

13. 画面1のプログレスバー (components/ProgressBar.tsx)

画面1に戻り、上部にバーを追加します。ここでServiceから「今月の合計」を取得し、グラフに反映させます。

バーをタップしたら画面2へ遷移する処理を追加します。

14. Settings画面など

その他の細かい画面を作ります。

